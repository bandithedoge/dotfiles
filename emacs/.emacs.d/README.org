#+TITLE: Emacs
#+PROPERTY: header-args :tangle init.el
* Table of Contents :toc:
- [[#personal][Personal]]
- [[#package-management][Package management]]
- [[#keybindings][Keybindings]]
  - [[#evil][Evil]]
  - [[#leader][Leader]]
- [[#functionality][Functionality]]
  - [[#snippets][Snippets]]
  - [[#projectile][Projectile]]
  - [[#version-control][Version control]]
  - [[#pairs][Pairs]]
  - [[#discord-rich-presence][Discord rich presence]]
  - [[#terminal-emulator][Terminal emulator]]
- [[#ui][UI]]
  - [[#ivy][Ivy]]
  - [[#ace][Ace]]
  - [[#which-key][which-key]]
  - [[#modeline][Modeline]]
  - [[#autocomplete][Autocomplete]]
  - [[#treemacs][Treemacs]]
  - [[#theme][Theme]]
  - [[#fonts][Fonts]]
  - [[#ui-elements][UI elements]]
  - [[#dashboard][Dashboard]]
  - [[#indentation][Indentation]]
- [[#languages][Languages]]
  - [[#haskell][Haskell]]
  - [[#htmlcssjs][HTML/CSS/JS]]
  - [[#python][Python]]
  - [[#org][Org]]
- [[#misc][Misc]]
  - [[#custom-variables][Custom variables]]
  - [[#tangle-on-save][Tangle on save]]

* Personal
#+begin_src elisp
  (setq user-full-name "Miko≈Çaj Lercher"
        user-mail-address "bandithedoge@protonmail.com")
#+end_src
* Package management
#+BEGIN_SRC elisp
  (require 'package)
  (setq package-archives '(("elpy" . "http")
                           ("melpa" . "https://melpa.org/packages/")
                           ("org". "https://orgmode.org/elpa/")
                           ("elpa" . "https://elpa.gnu.org/packages")))

  (package-initialize)
  (unless package-archive-contents
   (package-refresh-contents))

  (unless (package-installed-p 'use-package)
   (package-install 'use-package))

  (require 'use-package)
  (setq use-package-always-ensure t)
#+END_SRC
* Keybindings
** Evil
#+BEGIN_SRC elisp
  (use-package undo-fu)

  (use-package evil
    :init
    (setq evil-want-keybinding 'nil)
    :config
    (evil-mode 1)
    (evil-set-undo-system 'undo-fu)
    (use-package evil-collection
      :after evil
      :config (evil-collection-init)))

  (use-package evil-commentary
    :config (evil-commentary-mode))
#+END_SRC
** Leader
#+BEGIN_SRC elisp
  (use-package evil-god-state)

  (use-package evil-leader
    :config
    (global-evil-leader-mode)
    (evil-leader/set-leader "<SPC>"))

  (evil-leader/set-key
    "<SPC>" 'counsel-M-x'
    "f" 'find-file
    "b" 'counsel-switch-buffer
    "S-<SPC>" 'evil-execute-in-god-state
    "/" 'swiper

    "h" 'evil-window-left
    "j" 'evil-window-down
    "k" 'evil-window-up
    "l" 'evil-window-right

    "H" 'evil-window-move-far-left
    "J" 'evil-window-move-very-bottom
    "K" 'evil-window-move-very-top
    "L" 'evil-window-move-far-right

    "s" 'evil-window-split
    "S" 'evil-window-vsplit
    "W" 'evil-window-delete
    "w" 'kill-current-buffer
    "B" 'kill-buffer

    "y" 'yas-insert-snippet
    "g" 'magit
    "t" 'treemacs
    "v" 'evil-visual-block)
#+END_SRC
* Functionality
** Snippets
#+begin_src elisp
  ;; yasnippet
  (use-package yasnippet
    :config
    (yas-global-mode)
    (use-package yasnippet-snippets))
#+end_src
** Projectile
#+begin_src elisp
  ;; projectile
  (use-package projectile)
#+end_src
** Version control
#+begin_src elisp
  (use-package magit)
#+end_src
** Pairs
#+begin_src elisp
  (electric-pair-mode)
#+end_src
** Discord rich presence
#+begin_src elisp
  (use-package elcord
    :config (elcord-mode))
#+end_src
** Terminal emulator
#+begin_src elisp
  (use-package vterm)
#+end_src
* UI
** Ivy
*** TODO Fix search and order
#+begin_src elisp
  ;; ivy autocompletion
  (use-package ivy
    :config
    (ivy-mode 1)
    (setq ivy-re-builders-alist
          '((t . ivy--regex)))
    (setq ivy-height 17
          ivy-wrap t)
    (use-package all-the-icons-ivy
      :config
      (all-the-icons-ivy-setup)
      (setq all-the-icons-ivy-file-commands
            '(counsel-find-file))))

  ;; ivy-based menus
  (use-package counsel
    :config (counsel-mode 1))

  (use-package swiper)
#+end_src
** TODO Ace
#+begin_src elisp
  (use-package ace-popup-menu
    :config (ace-popup-menu-mode 1))
#+end_src
** which-key
#+begin_src elisp
  ;; which-key
  (use-package which-key
    :config (which-key-mode))
#+end_src
** Modeline
#+begin_src elisp
    ;; modeline
    (use-package doom-modeline
      :config
      (doom-modeline-mode 1)
      (setq doom-modeline-height 35
            doom-modeline-bar-width 3
            doom-modeline-enable-word-count t
            doom-modeline-indent-info t))
#+end_src
** Autocomplete
#+begin_src elisp
    ;; company autocompletion
    (use-package company
      :config (add-hook 'after-init-hook 'global-company-mode))
#+end_src
** Treemacs
*** TODO Prettier icons
#+begin_src elisp
        (use-package treemacs
          :config
          (use-package treemacs-all-the-icons)
          (use-package treemacs-evil)
          (use-package treemacs-magit)
          (use-package treemacs-projectile))
#+end_src
** Theme
*** TODO Port blueballs
#+begin_src elisp
  (use-package solaire-mode
    :config (solaire-global-mode +1))

  (use-package doom-themes)
  (load-theme 'doom-dracula t)

  (use-package rainbow-delimiters
    :config (add-hook 'prog-mode-hook #'rainbow-delimiters-mode))
#+end_src
** Fonts
#+begin_src elisp
  (set-face-attribute 'default nil :font "FiraCode Nerd Font" :height 100)
#+end_src
** UI elements
#+begin_src elisp
  (global-display-line-numbers-mode t)
  (dolist (mode '(term-mode-hook
                  treemacs-mode-hook))
    (add-hook mode (lambda () (display-line-numbers-mode 0))))

  (global-hl-line-mode)
  (global-visual-line-mode)

  (column-number-mode)
  (size-indication-mode)
  (which-function-mode)

  (scroll-bar-mode -1)
  (menu-bar-mode -1)
  (tool-bar-mode -1)
  (tooltip-mode -1)
#+end_src
** Dashboard
#+begin_src elisp
  (use-package dashboard
    :config
    (use-package dashboard-project-status)
    (dashboard-setup-startup-hook))
#+end_src
** Indentation
#+begin_src elisp
  (use-package highlight-indent-guides
    :config
    (add-hook 'prog-mode-hook 'highlight-indent-guides-mode)
    (setq highlight-indent-guides-method 'column))
#+end_src
* Languages 
** Haskell
#+begin_src elisp
  ;; haskell
  (use-package haskell-mode
    :config (use-package company-ghc))
#+end_src
** HTML/CSS/JS
#+begin_src elisp
  (use-package web-mode
    :config (use-package company-web))
#+end_src
** Python
#+begin_src elisp
  (use-package elpy
    :defer t
    :init (advice-add 'python-mode :before 'elpy-enable))
#+end_src
** Org
*** TODO Evil TODO item control
*** TODO Monospace line numbers
#+begin_src elisp
  (use-package org
    :config (add-hook 'org-mode-hook 'org-indent-mode)
    (use-package evil-org
      :config (add-hook 'org-mode-hook 'evil-org-mode))
    (use-package toc-org
      :config (add-hook 'org-mode-hook 'toc-org-mode))
    (use-package org-bullets
      :config (add-hook 'org-mode-hook #'org-bullets-mode))
    (use-package org-link-beautify
      :config (org-link-beautify-mode 1))
    (use-package org-variable-pitch
      :config (add-hook 'org-mode-hook 'org-variable-pitch-minor-mode))
    (use-package ox-pandoc)
    (use-package ox-hugo))
#+end_src
* Misc
** Custom variables
#+begin_src elisp
  (custom-set-variables
   '(safe-local-variable-values
     '((eval add-hook 'after-save-hook
             (lambda nil
               (if
                   (y-or-n-p "Tangle?")
                   (org-babel-tangle)))
             nil t))))
  (add-to-list 'load-path "~/.emacs.d/blueballs/")
#+end_src
** Tangle on save
;; Local Variables: 
;; eval: (add-hook 'after-save-hook (lambda ()(if (y-or-n-p "Tangle?")(org-babel-tangle))) nil t) 
;; End:
